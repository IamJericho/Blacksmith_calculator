<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Client Saddle Calculator</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body{background:#0e1117;color:#eaeaea}
h1,h2{color:#ff4d4d}
.table-zebra tbody tr:nth-child(odd){background:#0f141b}
.table-zebra tbody tr:nth-child(even){background:#161b22}
.output{background:#161b22;padding:12px;border:1px solid #2a2f3a;margin-top:15px}
pre{white-space:pre-wrap}
</style>
</head>
<body class="container-fluid">

<h1>Client Saddle Calculator</h1>

<h2>Regular Saddles</h2>
<table class="table table-dark table-sm table-zebra">
<thead><tr><th>Saddle</th><th>Qty</th></tr></thead>
<tbody id="regular"></tbody>
</table>

<h2>Platform Saddles</h2>
<table class="table table-dark table-sm table-zebra">
<thead><tr><th>Saddle</th><th>Qty</th></tr></thead>
<tbody id="platform"></tbody>
</table>

<div class="output">
<pre id="orderSummary"></pre>
<button class="btn btn-sm btn-primary" onclick="copyOrder()">Copy to Clipboard</button>
<span id="copyMsg" style="margin-left:10px;color:#4caf50;display:none;">Copied!</span>
</div>

<script src="blacksmith.js"></script>
<script>
function build(id,data){
  const t=document.getElementById(id);
  Object.keys(data).forEach(n=>{
    const r=document.createElement("tr");
    r.innerHTML=`<td>${n}</td><td><select class="form-select form-select-sm" data-name="${n}" data-type="${id}">
      ${Array.from({length:31},(_,i)=>`<option>${i}</option>`).join("")}
    </select></td>`;
    t.appendChild(r);
  });
}

build("regular",BLACKSMITH.saddles.regular);
build("platform",BLACKSMITH.saddles.platform);

document.addEventListener("change",calc);

function calc(){
  let totalTek=0, orderLines=[];
  document.querySelectorAll("select").forEach(sel=>{
    const qty=+sel.value;
    if(!qty) return;
    const item=BLACKSMITH.saddles[sel.dataset.type][sel.dataset.name];
    totalTek+=item.tek*qty;
    orderLines.push(`${qty} ${sel.dataset.name}`);
  });

  document.getElementById("orderSummary").textContent =
`Name: @your name
Order:
${orderLines.join("\n")}
Payment: ${totalTek} Tek Ceilings
Trader: <@1303790610620350587>`;
}

function copyOrder(){
  const text=document.getElementById("orderSummary").textContent;
  navigator.clipboard.writeText(text).then(()=>{
    const m=document.getElementById("copyMsg");
    m.style.display="inline";
    setTimeout(()=>m.style.display="none",1500);
  });
}
</script>
</body>
</html>
